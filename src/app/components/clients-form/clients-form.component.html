<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>

<div class="col-md-8">
<div class="card text-black">
    <div class="card-header" *ngIf="!client.id">New Client</div>
    <div class="card-header" *ngIf="client.id">Update Client</div>
    <div class="card-body"> 
        <label *ngIf="message!=''" style="color:red">{{message}}</label>
        <form #clientForm="ngForm">
            <div class="form-group row">
                <label>Shared Key</label>
                <div>
                    <input type="text" class="form-control" name="sharedKey" [(ngModel)]="client.sharedKey" #sharedKey="ngModel" placeholder="Shared Key" required/>
                        <div *ngIf="sharedKey.invalid && (sharedKey.dirty || sharedKey.touched)">
                        <div *ngIf="sharedKey.errors?.['required']" style="color:red">
                            SharedKey is required
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <label>Business Id</label>
                <div>
                    <input type="text" class="form-control" name="businessId" [(ngModel)]="client.businessId" #businessId="ngModel" placeholder="Business Id" required/>
                        <div *ngIf="businessId.invalid && (businessId.dirty || businessId.touched)">
                        <div *ngIf="businessId.errors?.['required']" style="color:red">
                            Business Id is required
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <label>Email</label>
                <div>
                    <input type="email" class="form-control" name="emailAddress" [(ngModel)]="client.email" #emailAddress="ngModel" placeholder="Email" required/>
                        <div *ngIf="emailAddress.invalid && (emailAddress.dirty || emailAddress.touched)">
                        <div *ngIf="emailAddress.errors?.['email']" style="color:red">
                            Email is in an invalid format
                        </div>
                        <div *ngIf="emailAddress.errors?.['required']" style="color:red">
                            Email is required
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <label>Phone</label>
                <div>
                    <input type="number" class="form-control" name="phone" [(ngModel)]="client.phone" #phone="ngModel" placeholder="Telefono" required/>
                        <div *ngIf="phone.invalid && (phone.dirty || phone.touched)">
                        <div *ngIf="phone.errors?.['required']" style="color:red">
                            Phone is required
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <label>Date Added</label>
                <div>
                    <input type="text" class="form-control" name="dateAdded" [(ngModel)]="client.dateAdded" #dateAdded="ngModel" disabled="true"/>
                </div>
            </div>

            <div class="form-group row">
                <button class="btn btn-primary" role="button" (click)='registerClient()' *ngIf="!client.id else elseBlock" [disabled]="!clientForm.form.valid">Register</button>
                <ng-template #elseBlock>
                    <button class="btn btn-primary" role="button" (click)='updateClient()' [disabled]="!clientForm.form.valid">Update</button>
                </ng-template>
            </div>
            
        </form>
    </div>
</div>
<div class="col-md-8"><button class="btn btn-primary" role="button" (click)='back()'>Back</button></div>
</div>
</html>